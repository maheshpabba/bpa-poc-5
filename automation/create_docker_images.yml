
parameters: 
  images: []


steps:
- ${{ each image in parameters.images }}:
  - task: Docker@2
    inputs:
      containerRegistry: 'docker_acr'
      repository: ${{ image }}
      command: 'buildAndPush'
      Dockerfile: '$(Build.SourcesDirectory)/microservices/${{ image }}/Dockerfile.${{ image }}'
      buildContext: '$(Build.SourcesDirectory)/microservices/${{ image }}'
      tags: '$(Build.SourceBranchName)-$(Build.BuildId)'
